(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(4003)}])},4003:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return B}});var t,a,o=s(5893),c=s(9008),r=s.n(c),i=s(7294),l=(0,s(9367).io)("ws://143.110.183.73:3013"),u=function(e,n,s){return l.emit("botRequest",{content:{text:e,media:s,userId:n.userID,appId:"appId",channel:"diksha",from:n.socketID,context:null},to:"admin"})},d=s(6946),m=s.n(d),h=s(8527),p=s(7778),g=s(9876),x=function(e){var n=e.text,s=e.location,t=e.username,a=e.self,c=e.choices,r=e.data,i=e.image,l=e.caption,u=e.audio,d=e.video,x=e.doc;return(0,o.jsxs)(h.kC,{children:[!0===a&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(h.LZ,{}),(0,o.jsxs)("div",{className:"chat-message chat-reciever",children:[(0,o.jsx)("div",{className:m().message_username,children:t}),!i&&!u&&!d&&!x&&!s&&(0,o.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:n}),s&&(0,o.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:(0,o.jsx)("a",{href:"https://www.google.com/maps?q=".concat(s.latitude,",").concat(s.longitude,"+&output=embed"),target:"blank",style:{color:"White"},children:(0,o.jsx)("iframe",{src:"https://www.google.com/maps?q=".concat(s.latitude,",").concat(s.longitude,"+&output=embed")})})}),i&&(0,o.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:(0,o.jsx)("img",{src:i,style:{maxWidth:"300px"}})}),u&&(0,o.jsxs)("audio",{controls:!0,children:[(0,o.jsx)("source",{src:u}),"Your browser does not support the audio element."]}),d&&(0,o.jsxs)("video",{width:"320",height:"240",controls:!0,children:[(0,o.jsx)("source",{src:d}),"Your browser does not support the video tag."]}),x&&(0,o.jsx)(p.zx,{colorScheme:"blackAlpha",padding:"10px",marginTop:"10px",children:(0,o.jsxs)(h.rU,{href:x,isExternal:!0,children:["Click to open this file ",(0,o.jsx)(g.h0,{mx:"2px"})]})})]})]}),!0===!a&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"chat-msg",children:[(0,o.jsxs)("div",{className:"Invalid Input!!! Please try again."===n?"chat-error-message":"chat-message",children:[(0,o.jsx)("div",{className:m().message_username,children:t}),!i&&!u&&!d&&!x&&(0,o.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:n}),i&&(0,o.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:(0,o.jsx)("img",{src:i,style:{maxWidth:"300px"}})}),u&&(0,o.jsxs)("audio",{controls:!0,children:[(0,o.jsx)("source",{src:u}),"Your browser does not support the audio element."]}),d&&(0,o.jsxs)("video",{width:"320",height:"240",controls:!0,children:[(0,o.jsx)("source",{src:d}),"Your browser does not support the video tag."]}),x&&(0,o.jsx)(p.zx,{colorScheme:"blackAlpha",padding:"10px",marginTop:"10px",children:(0,o.jsxs)(h.rU,{href:x,isExternal:!0,children:["Click to open this file ",(0,o.jsx)(g.h0,{mx:"2px"})]})}),(0,o.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:l})]}),c&&c.length>0&&(0,o.jsx)("div",{className:"chat-choices-container",children:c.map((function(e){return(0,o.jsxs)(p.zx,{className:"chat-choices",onClick:function(){return r(e)},children:[e.key," ",e.text]},e.key)}))})]}),(0,o.jsx)(h.LZ,{})]})]})},f=function(e){var n=(0,i.useRef)(null);(0,i.useEffect)((function(){n.current.scrollTop=n.current.scrollHeight-n.current.clientHeight}),[n]);var s=e.username,t=e.messages||[];return console.log({username:s,messages:t}),(0,o.jsxs)(h.xu,{ref:n,children:[t.length>0&&t.map((function(n,t){return(0,o.jsx)(x,{text:n.text,location:n.location,username:n.username,self:s===n.username,choices:n.choices,data:e.selected,image:n.image,caption:n.caption,audio:n.audio,video:n.video,doc:n.doc},t)})),(0,o.jsx)("div",{children:"\xa0"})]})},v=s(4051),j=s.n(v),w=s(5434),b=s(2920);s(4213),s(1535);function _(e,n,s,t,a,o,c){try{var r=e[o](c),i=r.value}catch(l){return void s(l)}r.done?n(i):Promise.resolve(i).then(t,a)}var y=function(e){var n=(0,i.useState)(null),s=n[0],t=n[1];(0,i.useEffect)((function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){var n=e.coords.latitude,s=e.coords.longitude;t("https://www.google.com/maps?q=".concat(n,",").concat(s,"+&output=embed"))})):b.Am.error("Geolocation is not supported by this browser.")}),[]);var a=(0,i.useRef)(null),c=function(n){n.preventDefault();var s=a.current.value;0===a.current.value.trim().length?b.Am.error("Please enter a valid message"):s.length>0&&(null===e||void 0===e?void 0:e.onSend)&&e.onSend(a.current.value),a.current.value=""},r=function(){var n,s=(n=j().mark((function n(s){var t,a,o;return j().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(t=new FormData).append("file",s),n.prev=2,n.next=5,fetch("http://143.110.255.220:8080/cdn/minioSignedUrl",{method:"post",body:t});case 5:return a=n.sent,n.next=8,a.json();case 8:o=n.sent,200===a.status?e.onSend(null,o):console.log("image not uploaded"),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(2),console.error("no response received");case 15:case"end":return n.stop()}}),n,null,[[2,12]])})),function(){var e=this,s=arguments;return new Promise((function(t,a){var o=n.apply(e,s);function c(e){_(o,t,a,c,r,"next",e)}function r(e){_(o,t,a,c,r,"throw",e)}c(void 0)}))});return function(e){return s.apply(this,arguments)}}();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(b.Ix,{}),(0,o.jsx)("div",{className:"chat__footer",style:{backgroundColor:"#000080"},children:(0,o.jsxs)("form",{children:[(0,o.jsx)("input",{placeholder:"Type your message",ref:a,onKeyDown:function(e){13===e.keyCode&&a.current.value.length>0&&c(e)}}),(0,o.jsxs)("div",{className:"file btn btn-primary",style:{position:"relative",overflow:"hidden",marginRight:"7px",paddingTop:"10px"},children:[(0,o.jsx)(w.qbQ,{}),(0,o.jsx)("input",{type:"file",name:"file",style:{position:"absolute",fontSize:"50px",opacity:"0",right:"0",top:"0"},onChange:function(e){r(e.target.files[0])}})]}),(0,o.jsx)("button",{type:"submit",onClick:function(n){n.preventDefault(),e.onSendLocation(s)},className:"file btn btn-primary",children:(0,o.jsx)(w.$0r,{})}),(0,o.jsx)("button",{className:"send__btn",onClick:c,type:"submit",children:"Send"})]})})]})},N=s(1664),k=s.n(N),S=s(6087),C=s(9036),I=s.n(C),E=s(1163),P=function(e){return(0,o.jsxs)(S.v2,{children:[(0,o.jsxs)(S.j2,{className:I().item,style:{width:"100px"},children:["Wallpapers ",(0,o.jsx)(g.v4,{})]}),(0,o.jsxs)(S.qy,{className:I().sublist,children:[(0,o.jsx)(S.sN,{className:I().subitem,children:(0,o.jsx)("div",{onClick:e.orig,className:I().wallbtn2,children:"Default wallpaper"})}),(0,o.jsx)(S.sN,{className:I().subitem,children:(0,o.jsx)("div",{onClick:e.wall1,className:I().wallbtn1,children:"wallpaper 1"})}),(0,o.jsx)(S.sN,{className:I().subitem,children:(0,o.jsx)("div",{onClick:e.wall2,className:I().wallbtn3,children:"wallpaper 2"})})]})]})},U=function(){var e=(0,i.useState)(""),n=e[0],s=e[1];(0,i.useEffect)((function(){s(localStorage.getItem("theme")||"")}),[]),(0,i.useEffect)((function(){"green"===n?t():"red"===n&&a()}),[n]);var t=function(){document.getElementsByClassName("chat-body")[0].style.backgroundImage="url(https://cdn.wallpapersafari.com/98/39/9My6KE.jpg)",s("green"),localStorage.setItem("theme","green")},a=function(){document.getElementsByClassName("chat-body")[0].style.backgroundImage="url(https://c4.wallpaperflare.com/wallpaper/459/528/47/faces-syringe-piling-up-figures-wallpaper-preview.jpg)",s("red"),localStorage.setItem("theme","red")};(0,E.useRouter)();return(0,o.jsx)(h.kC,{p:"2",borderBottom:"1px",children:(0,o.jsx)(h.xu,{children:(0,o.jsxs)(S.v2,{children:[(0,o.jsx)(S.j2,{className:I().menuBox,as:p.hU,"aria-label":"Options",icon:(0,o.jsx)(g.Uq,{}),variant:"outline",style:{width:"60px",height:"20px"}}),(0,o.jsxs)(S.qy,{className:I().navbar,children:[(0,o.jsx)(k(),{href:"/",children:(0,o.jsx)(S.sN,{className:I().item,children:"Home"})}),(0,o.jsx)(P,{wall1:t,wall2:a,orig:function(){var e=document.getElementsByClassName("chat-body");e[0].style.backgroundImage="none",e[0].style.backgroundColor="white",s(""),localStorage.setItem("theme","")}})]})]})})})},T=s(5152);function O(e,n,s){return n in e?Object.defineProperty(e,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[n]=s,e}function D(e){for(var n=1;n<arguments.length;n++){var s=null!=arguments[n]?arguments[n]:{},t=Object.keys(s);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),t.forEach((function(n){O(e,n,s[n])}))}return e}s.n(T)()((function(){return s.e(131).then(s.t.bind(s,6131,23))}),{loadableGenerated:{webpack:function(){return[6131]}},ssr:!1});var W=function(e){var n=(0,i.useState)({messages:[],username:"chaks",session:{}}),s=n[0],c=n[1];(0,i.useEffect)((function(){t=l,function(e){a=e}(r),window.scrollTo(0,document.body.scrollHeight)}),[s]);var r=function(e){console.log({session:e}),c(D({},s,{session:e}))},l=function(e){"IMAGE"===e.content.msg_type?c(D({},s,{messages:s.messages.concat({username:"UCI",text:e.content.title,image:e.content.media_url,choices:e.content.choices,caption:e.content.caption})})):"AUDIO"===e.content.msg_type?c(D({},s,{messages:s.messages.concat({username:"UCI",text:e.content.title,audio:e.content.media_url,choices:e.content.choices})})):"VIDEO"===e.content.msg_type?c(D({},s,{messages:s.messages.concat({username:"UCI",text:e.content.title,video:e.content.media_url,choices:e.content.choices})})):"DOCUMENT"===e.content.msg_type?c(D({},s,{messages:s.messages.concat({username:"UCI",text:e.content.title,doc:e.content.media_url,choices:e.content.choices})})):c(D({},s,{messages:s.messages.concat({username:"UCI",text:e.content.title,choices:e.content.choices})}))},d=function(e,n){u(e,s.session,n),n?"image"===n.mimeType.slice(0,5)?c(D({},s,{messages:s.messages.concat({username:s.username,image:n.url})})):"audio"===n.mimeType.slice(0,5)?c(D({},s,{messages:s.messages.concat({username:s.username,audio:n.url})})):"video"===n.mimeType.slice(0,5)?c(D({},s,{messages:s.messages.concat({username:s.username,video:n.url})})):"application"===n.mimeType.slice(0,11)?c(D({},s,{messages:s.messages.concat({username:s.username,doc:n.url})})):c(D({},s,{messages:s.messages.concat({username:s.username,text:e,doc:n.url})})):c(D({},s,{messages:s.messages.concat({username:s.username,text:e})}))};if(null===s.username)return console.log("Please set a username first"),(0,o.jsxs)("div",{className:"container",children:[(0,o.jsx)("div",{className:"container-title",children:"Enter username"}),(0,o.jsx)(y,{onSend:function(e){c(D({},s,{username:e}))}})]});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"chat-header",children:[(0,o.jsx)("div",{className:"chat__header--info",children:(0,o.jsx)("h3",{children:"Chakshu Gautam"})}),(0,o.jsx)("div",{className:"font-change"}),(0,o.jsx)(U,{}),(0,o.jsx)("div",{className:"chat__header--right"})]}),(0,o.jsxs)("div",{className:"chat-body-container",children:[(0,o.jsx)("div",{className:"chat-body",children:(0,o.jsx)(f,{messages:s.messages,username:s.username,selected:function(e){var n=e.key+" "+e.text;d(n,null)}})}),(0,o.jsx)(y,{onSend:d,onSendLocation:function(e){u(e,s.session,null),navigator.geolocation.getCurrentPosition((function(e){c(D({},s,{messages:s.messages.concat({username:s.username,location:{latitude:e.coords.latitude,longitude:e.coords.longitude}})}))}))}})]})]})},q=s(1608),B=function(){return(0,o.jsxs)(i.StrictMode,{children:[(0,o.jsxs)(r(),{children:[(0,o.jsx)("link",{rel:"icon",href:"%PUBLIC_URL%/favicon.ico"}),(0,o.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,o.jsx)("meta",{name:"theme-color",content:"#000000"}),(0,o.jsx)("meta",{name:"description",content:"Web site created using create-react-app"}),(0,o.jsx)("link",{rel:"apple-touch-icon",href:"%PUBLIC_URL%/logo192.png"}),(0,o.jsx)("title",{children:"UCI PWA"})]}),(0,o.jsx)(q.ZQ,{}),(0,o.jsx)(W,{})]})};l.on("connect",(function(){console.log("opened ws connection ".concat(l.id))})),l.on("disconnect",(function(){console.log("close ws connection")})),l.on("botResponse",(function(e){t&&t(e)})),l.on("session",(function(e){a&&a(e)}))},6946:function(e){e.exports={message_window:"MessageWindow_message_window__owQ0r",message:"MessageWindow_message__8r7Ws",message_self:"MessageWindow_message_self__5pfxw",message_username:"MessageWindow_message_username__1TKxv"}},9036:function(e){e.exports={navbar:"SecNavbar_navbar__GWaMi",menuBox:"SecNavbar_menuBox__PVwPV",item:"SecNavbar_item__7FwKT",wallbtn1:"SecNavbar_wallbtn1__FDjqm",wallbtn2:"SecNavbar_wallbtn2__HZQHT",wallbtn3:"SecNavbar_wallbtn3__lb17s",subitem:"SecNavbar_subitem__3LqbE"}}},function(e){e.O(0,[161,228,101,774,888,179],(function(){return n=8312,e(e.s=n);var n}));var n=e.O();_N_E=n}]);